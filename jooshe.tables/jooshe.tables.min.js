// Jooshe Tables v1.0.0 | (c) 2013 Brien Givens | opensource.org/licenses/MIT
createClass("table",function(e,t,n,r){return element("table",e,[this].concat(t),n,r)},{$:{expansionElement:"tbody",appendCell:function(e,t,n,r){return this.body(0).$.appendCell(e,t,n,r)},appendRow:function(e,t,n,r){return this.body(0).$.appendRow(e,t,n,r)},body:function(e,t,n,r,i){var s=/^\[object HTML/.test(Object.prototype.toString.call(t)),o,u=this.el,a=window[this.expansionElement],f=J$.wrap,l=a==tbody?"tBodies":"childNodes";e=e||0;if(e>=0&&u[l].length>e){o=u[l][e];if(s)u.replaceChild(o,t)}else{o=s?t:new a(t,n,r);if(e<0&&u[l].length)u.insertBefore(o,u.firstChild);else{while(u[l].length<e)u.appendChild(new a);u.appendChild(o)}}f(o.style,s?n:t);f(o,s?r:n);f(o.$,s?i:r);return o},cell:function(e,t,n,r,i,s){return this.body(0).$.cell(e,t,n,r,i,s)},firstCell:function(e,t,n,r){return this.body(0).$.firstCell(e,t,n,r)},firstRow:function(e,t,n,r){return this.body(0).$.firstRow(e,t,n,r)},foot:function(e,t,n,r){return this.el.tFoot||this.el.appendChild(new tfoot(e,t,n,r))},head:function(e,t,n,r){return this.el.tHead||this.el.appendChild(new thead(e,t,n,r))},lastCell:function(e,t,n,r){return this.body(0).$.lastCell(e,t,n,r)},lastRow:function(e,t,n,r){return this.body(0).$.lastRow(e,t,n,r)},prependCell:function(e,t,n,r){return this.body(0).$.prependCell(e,t,n,r)},prependRow:function(e,t,n,r){return this.body(0).$.prependRow(e,t,n,r)},row:function(e,t,n,r,i){return this.body(0).$.row(e,t,n,r,i)},setBackground:function(e){var t=this.el;t.style.backgroundImage=e;return t}}});createClass("tbody",function(e,t,n,r,i){return element(i||"tbody",e,[this].concat(t),n,r)},{$:{expansionElement:"tr",expansionMethod:"row",appendCell:function(e,t,n,r){return this.lastRow().$.appendCell(e,t,n,r)},appendRow:function(e,t,n,r){return this[this.expansionMethod].call(this,this.el.childNodes.length,e,t,n,r)},cell:function(e,t,n,r,i,s){return this.row(e).$.cell(t,n,r,i,s)},firstCell:function(e,t,n,r){return this.cell(0,0,e,t,n,r)},firstRow:function(e,t,n,r){return this.row(0,e,t,n,r)},lastCell:function(e,t,n,r){return this.lastRow().$.lastCell(e,t,n,r)},lastRow:function(e,t,n,r){var i=this.el.childNodes.length;return this.row(i?i-1:0,e,t,n,r)},prependCell:function(e,t,n,r){return this.lastRow().$.prependCell(e,t,n,r)},prependRow:function(e,t,n,r){return this[this.expansionMethod].call(this,-1,e,t,n,r)},row:table.prototype.$.body}});createClass("thead",function(e,t,n,r){return new tbody(e,t,n,r,"thead")});createClass("tfoot",function(e,t,n,r){return new tbody(e,t,n,r,"tfoot")});createClass("tr",function(e,t,n,r){return element("tr",e,[this].concat(t),n,r)},{$:{expansionElement:"td",expansionMethod:"cell",appendCell:tbody.prototype.$.appendRow,cell:table.prototype.$.body,firstCell:function(e,t,n,r){return this.cell(0,e,t,n,r)},lastCell:function(e,t,n,r){var i=this.el.childNodes.length;return this.cell(i?i-1:0,e,t,n,r)},prependCell:tbody.prototype.$.prependRow}});createClass("td",function(e,t,n,r,i){var s=element("td",e,[this].concat(t),n,r);if(i)s.$.setImage(i);return s},{$:{clear:function(){var e=this.el;while(e.firstChild)e.removeChild(e.firstChild)},setBackground:table.prototype.$.setBackground,setImage:function(e,t,n){this.clear();var r=this.el;r.style.textAlign="center";return r.appendChild(element("img",t,n,null,{src:e}))},setSprite:function(e,t,n,r,i){this.clear();return this.el.appendChild(element("div",{background:"url("+e+") no-repeat "+t+"px "+n+"px",margin:"auto",width:r+"px",height:i+"px"}))}}})
